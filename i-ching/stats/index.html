<!DOCTYPE html>
<html lang="it">
    <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tendenze ¬∑ Jacopo Donati</title>
    <meta name="title" content="Tendenze ¬∑ Jacopo Donati">
    <meta name="description" content="üçïüçï">
    <meta name="author" content="Jacopo Donati">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.jacopodonati.it/i-ching/stats/">
    <meta property="og:title" content="Tendenze">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://www.jacopodonati.it/i-ching/stats/">
    <meta property="og:description" content="Un piccolo esperimento statistico.">
    <meta name="twitter:description" content="Un piccolo esperimento statistico.">
    <meta property="article:author" content="Jacopo Donati">
    <meta property="article:section" content="Blog">
    <meta property="article:published_time" content="2022-08-04T04:42+0000">
    <meta name="twitter:site" content="@_jacopodonati">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:creator" content="@_jacopodonati">
    <meta name="twitter:title" content="Tendenze">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#f9f7f6">
    <meta name="apple-mobile-web-app-title" content="Jacopo Donati">
    <meta name="application-name" content="Jacopo Donati">
    <meta name="msapplication-TileColor" content="#f9f7f6">
    <meta name="theme-color" content="#f9f7f6" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#23201f" media="(prefers-color-scheme: dark)">

    <link rel="stylesheet" href="/scss/main.min.7c545377c8c24adea710533801ce2b3bda2c773801cfc51d1e79becae7219950.css" integrity="sha256-fFRTd8jCSt6nEFM4Ac4rO9osdzgBz8UdHnm&#43;yuchmVA=">
    <link rel="stylesheet" href="/scss/print.min.c12cd6c3738edc9bc35f04921032f12c71d6220f85c6f2c91b248e50c28b4cbb.css" integrity="sha256-wSzWw3OO3JvDXwSSEDLxLHHWIg&#43;FxvLJGySOUMKLTLs=" media="print">

    <script src="./daily.js" type="module"></script>
    <script src="/js/chart.min.js"></script>
    <script src="/js/luxon.min.js"></script>
    <script src="/js/chartjs-adapter-luxon.js"></script>

    </head>
    <body>    <div id="home-header">
        <div class="left">
            <div class="nome">
                <a href="/">Jacopo Donati</a>
            </div>
            <div id="location">üìç Bologna</div>
        </div>
        <div id="photo">
            <img src="img/crapa.jpg" srcset="/img/crapa_hua361419d8f6a05dd4397cd9afaae28ad_342200_0x144_resize_q80_h2_box.webp 1x, /img/crapa_hua361419d8f6a05dd4397cd9afaae28ad_342200_0x216_resize_q80_h2_box.webp 2x, /img/crapa_hua361419d8f6a05dd4397cd9afaae28ad_342200_0x288_resize_q80_h2_box.webp 3x, /img/crapa_hua361419d8f6a05dd4397cd9afaae28ad_342200_0x360_resize_q80_h2_box.webp 4x" alt="Jacopo Donati" width="72" height="72">
        </div>
    </div>
        <main id="content" class="i-ching page">
<article>
    <h1>Tendenze</h1>
    <p>Un piccolo esperimento statistico.</p>

    <section class="chart">
        <canvas id="daily-throws" width="400" height="400"></canvas>
    </section>
</article>

        </main>
        <footer>
            <p>¬© 2020-2022 Jacopo Donati</p>
        </footer>
<script type="module">
    import { daily_throws } from './daily.js';
    var DateTime = luxon.DateTime;

    function compileThrows(throws) {
        let data = {
            'primaries': [],
            'relatives' : []
        }

        throws.forEach(day => {
            const dateObj = new Date(day.date);
            
            const timestamp = day.date;
            day.throws.forEach(single_throw => {
                data.primaries.push({
                    x: timestamp,
                    y: single_throw[0]
                });
                if (single_throw.length > 1) {
                    data.relatives.push({
                        x: timestamp,
                        y: single_throw[1]
                    });
                }
            });
        });
        return data;
    }

    let daily_data = compileThrows(daily_throws);

    const dtc = document.getElementById('daily-throws').getContext('2d');
    const dailyThrows = new Chart(dtc, {
    type: 'scatter',
    data: {
        datasets: [
            {
                label: 'Primari',
                data: daily_data.primaries,
                backgroundColor: 'rgb(101, 156, 219)'
            },
            {
                label: 'Relativi',
                data: daily_data.relatives,
                backgroundColor: 'rgb(227, 185, 86)'
            },

        ]
    },
    options: {
        locale: 'it',
        scales: {
            x: {
                type: 'time',
                time: {
                    unit: 'day',
                    displayFormats: {
                        day: 'd MMMM'
                    }
                }
            },
            y: {
                min: 1,
                max: 64,
                ticks: {
                    stepSize: 8
                }
            }
        }
    }
});
</script>

    </body>
</html>
